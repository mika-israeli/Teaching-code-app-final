{"ast":null,"code":"import _slicedToArray from\"/Users/mikaisraeli/Desktop/Teaching-code-app copy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from\"react\";import\"../css/code.css\";import SmileyFace from\"./SmileyFace\";import useSock from\"./UseSock\";import CodeMirror from\"@uiw/react-codemirror\";import{javascript}from\"@codemirror/lang-javascript\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Code(_ref){var id=_ref.id,isStudent=_ref.isStudent,code=_ref.code,onCodeChange=_ref.onCodeChange;var _useSock=useSock(),socket=_useSock.socket;//new code of the stident sulotion\nvar _useState=useState(code.testCode),_useState2=_slicedToArray(_useState,2),newCode=_useState2[0],setNewCode=_useState2[1];//   const [studentsCode, setStudentsCode] = useState(code.textCode);\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isCodeCorrect=_useState4[0],setIsCodeCorrect=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMentorLeft=_useState6[0],setIsMentorLeft=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isStudentLeft=_useState8[0],setIsStudentLeft=_useState8[1];socket===null||socket===void 0?void 0:socket.on(\"newCodeOfStudent\",function(code){console.log(\"new code from student: \",code);setNewCode(code);});socket===null||socket===void 0?void 0:socket.on(\"mentorLeave\",function(data){console.log(data);setIsMentorLeft(true);});socket===null||socket===void 0?void 0:socket.on(\"studentLeave\",function(data){console.log(data);setIsStudentLeft(true);setNewCode(code.testCode);});socket===null||socket===void 0?void 0:socket.on(\"mentorJoin\",function(data){console.log(data);setIsMentorLeft(false);});socket===null||socket===void 0?void 0:socket.on(\"studentJoin\",function(data){console.log(data);setIsStudentLeft(false);});//check if the student code is correct\nfunction handleSubmit(){code.correctedCode===newCode?setIsCodeCorrect(true):setIsCodeCorrect(false);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"The subject of the lesson is:\",code.title]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Hey i am the : \",isStudent?\"Student\":\"Mentor \"]}),isCodeCorrect&&isStudent&&/*#__PURE__*/_jsx(SmileyFace,{}),/*#__PURE__*/_jsx(CodeMirror,{className:\"code-mirror\",value:newCode,height:\"200px\",extensions:[javascript({jsx:true})],onChange:function onChange(value,viewUpdate){onCodeChange(value);setNewCode(value);},editable:isStudent}),isStudent?/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Save\"}):null,isMentorLeft&&/*#__PURE__*/_jsx(\"h3\",{children:\"The mentor left the room!\"}),isStudentLeft&&/*#__PURE__*/_jsx(\"h3\",{children:\"The student left the room!\"})]});}export default Code;","map":{"version":3,"names":["React","useEffect","useState","useRef","SmileyFace","useSock","CodeMirror","javascript","jsxs","_jsxs","jsx","_jsx","Code","_ref","id","isStudent","code","onCodeChange","_useSock","socket","_useState","testCode","_useState2","_slicedToArray","newCode","setNewCode","_useState3","_useState4","isCodeCorrect","setIsCodeCorrect","_useState5","_useState6","isMentorLeft","setIsMentorLeft","_useState7","_useState8","isStudentLeft","setIsStudentLeft","on","console","log","data","handleSubmit","correctedCode","children","title","className","value","height","extensions","onChange","viewUpdate","editable","onClick"],"sources":["/Users/mikaisraeli/Desktop/Teaching-code-app copy/frontend/src/components/Code.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport \"../css/code.css\";\nimport SmileyFace from \"./SmileyFace\";\nimport useSock from \"./UseSock\";\nimport CodeMirror from \"@uiw/react-codemirror\";\nimport { javascript } from \"@codemirror/lang-javascript\";\n\nfunction Code({ id, isStudent, code, onCodeChange }) {\n  const { socket } = useSock();\n\n  //new code of the stident sulotion\n  const [newCode, setNewCode] = useState(code.testCode);\n  //   const [studentsCode, setStudentsCode] = useState(code.textCode);\n  const [isCodeCorrect, setIsCodeCorrect] = useState(false);\n  const [isMentorLeft, setIsMentorLeft] = useState(false);\n  const [isStudentLeft, setIsStudentLeft] = useState(false);\n\n  socket?.on(\"newCodeOfStudent\", (code) => {\n    console.log(\"new code from student: \", code);\n    setNewCode(code);\n  });\n\n  socket?.on(\"mentorLeave\", (data) => {\n    console.log(data);\n    setIsMentorLeft(true);\n  });\n\n  socket?.on(\"studentLeave\", (data) => {\n    console.log(data);\n    setIsStudentLeft(true);\n    setNewCode(code.testCode);\n  });\n\n  socket?.on(\"mentorJoin\", (data) => {\n    console.log(data);\n    setIsMentorLeft(false);\n  });\n\n  socket?.on(\"studentJoin\", (data) => {\n    console.log(data);\n    setIsStudentLeft(false);\n  });\n\n  //check if the student code is correct\n\n  function handleSubmit() {\n    code.correctedCode === newCode\n      ? setIsCodeCorrect(true)\n      : setIsCodeCorrect(false);\n  }\n\n  return (\n    <div>\n      <h1>The subject of the lesson is:{code.title}</h1>\n      <h2>Hey i am the : {isStudent ? \"Student\" : \"Mentor \"}</h2>\n      {isCodeCorrect && isStudent && <SmileyFace />}\n      <CodeMirror\n        className=\"code-mirror\"\n        value={newCode}\n        height=\"200px\"\n        extensions={[javascript({ jsx: true })]}\n        onChange={(value, viewUpdate) => {\n          onCodeChange(value);\n          setNewCode(value);\n        }}\n        editable={isStudent}\n      />\n      {isStudent ? <button onClick={handleSubmit}>Save</button> : null}\n\n      {isMentorLeft && <h3>The mentor left the room!</h3>}\n      {isStudentLeft && <h3>The student left the room!</h3>}\n    </div>\n  );\n}\n\nexport default Code;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}