{"ast":null,"code":"import _slicedToArray from\"/Users/mikaisraeli/Desktop/Teaching-code-app copy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Code from\"../components/Code\";import axios from\"axios\";import io from\"socket.io-client\";import useSock from\"../components/UseSock\";import{jsx as _jsx}from\"react/jsx-runtime\";var CodeBlockPage=function CodeBlockPage(){var id=window.location.pathname.split(\"/\")[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),code=_useState2[0],setCode=_useState2[1];var _useSock=useSock(),socket=_useSock.socket;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isStudent=_useState4[0],setIsStudent=_useState4[1];useEffect(function(){// Get data code by id from the server using Axios\nconsole.log(id);axios.get(\"http://localhost:8000/code/\".concat(id)).then(function(response){console.log(\"Data fetched: \",response.data);setCode(response.data);}).catch(function(error){console.error(\"Error fetching data:\",error);});socket&&socket.emit(\"join\",{id:id});return function(){socket===null||socket===void 0?void 0:socket.emit(\"leave\",{id:id});console.log(\"leave\");};},[socket]);socket.on(\"role\",function(_ref){var isMentor=_ref.isMentor;return setIsStudent(!isMentor);});///send the new code\nvar onCodeChange=function onCodeChange(newCode){console.log(\"New code from student: \",newCode);if(socket){socket.emit(\"newCode\",{id:id,code:newCode});}};return/*#__PURE__*/_jsx(\"div\",{children:code!==\"\"&&/*#__PURE__*/_jsx(Code,{code:code,onCodeChange:onCodeChange,isStudent:isStudent,id:id})});};export default CodeBlockPage;","map":{"version":3,"names":["React","useEffect","useState","Code","axios","io","useSock","jsx","_jsx","CodeBlockPage","id","window","location","pathname","split","_useState","_useState2","_slicedToArray","code","setCode","_useSock","socket","_useState3","_useState4","isStudent","setIsStudent","console","log","get","concat","then","response","data","catch","error","emit","on","_ref","isMentor","onCodeChange","newCode","children"],"sources":["/Users/mikaisraeli/Desktop/Teaching-code-app copy/frontend/src/pages/CodeBlockPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Code from \"../components/Code\";\nimport axios from \"axios\";\nimport io from \"socket.io-client\";\nimport useSock from \"../components/UseSock\";\n\nconst CodeBlockPage = () => {\n  const id = window.location.pathname.split(\"/\")[1];\n  const [code, setCode] = useState(\"\");\n  const { socket } = useSock();\n\n  const [isStudent, setIsStudent] = useState(false);\n\n  useEffect(() => {\n    // Get data code by id from the server using Axios\n    console.log(id);\n    axios\n      .get(`http://localhost:8000/code/${id}`)\n      .then((response) => {\n        console.log(\"Data fetched: \", response.data);\n        setCode(response.data);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data:\", error);\n      });\n    socket && socket.emit(\"join\", { id: id });\n\n    return () => {\n      socket?.emit(\"leave\", { id: id });\n      console.log(\"leave\");\n    };\n  }, [socket]);\n\n  socket.on(\"role\", ({ isMentor }) => setIsStudent(!isMentor));\n\n  ///send the new code\n  const onCodeChange = (newCode) => {\n    console.log(\"New code from student: \", newCode);\n    if (socket) {\n      socket.emit(\"newCode\", { id: id, code: newCode });\n    }\n  };\n\n  return (\n    <div>\n      {code !== \"\" && (\n        <Code\n          code={code}\n          onCodeChange={onCodeChange}\n          isStudent={isStudent}\n          id={id}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CodeBlockPage;\n"],"mappings":"gJAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,EAAE,KAAM,kBAAkB,CACjC,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B,GAAM,CAAAC,EAAE,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACjD,IAAAC,SAAA,CAAwBb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,QAAA,CAAmBd,OAAO,CAAC,CAAC,CAApBe,MAAM,CAAAD,QAAA,CAANC,MAAM,CAEd,IAAAC,UAAA,CAAkCpB,QAAQ,CAAC,KAAK,CAAC,CAAAqB,UAAA,CAAAN,cAAA,CAAAK,UAAA,IAA1CE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9BtB,SAAS,CAAC,UAAM,CACd;AACAyB,OAAO,CAACC,GAAG,CAACjB,EAAE,CAAC,CACfN,KAAK,CACFwB,GAAG,+BAAAC,MAAA,CAA+BnB,EAAE,CAAE,CAAC,CACvCoB,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBL,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEI,QAAQ,CAACC,IAAI,CAAC,CAC5Cb,OAAO,CAACY,QAAQ,CAACC,IAAI,CAAC,CACxB,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBR,OAAO,CAACQ,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CAAC,CAAC,CACJb,MAAM,EAAIA,MAAM,CAACc,IAAI,CAAC,MAAM,CAAE,CAAEzB,EAAE,CAAEA,EAAG,CAAC,CAAC,CAEzC,MAAO,WAAM,CACXW,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEc,IAAI,CAAC,OAAO,CAAE,CAAEzB,EAAE,CAAEA,EAAG,CAAC,CAAC,CACjCgB,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC,CACtB,CAAC,CACH,CAAC,CAAE,CAACN,MAAM,CAAC,CAAC,CAEZA,MAAM,CAACe,EAAE,CAAC,MAAM,CAAE,SAAAC,IAAA,KAAG,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,OAAO,CAAAb,YAAY,CAAC,CAACa,QAAQ,CAAC,GAAC,CAE5D;AACA,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,OAAO,CAAK,CAChCd,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEa,OAAO,CAAC,CAC/C,GAAInB,MAAM,CAAE,CACVA,MAAM,CAACc,IAAI,CAAC,SAAS,CAAE,CAAEzB,EAAE,CAAEA,EAAE,CAAEQ,IAAI,CAAEsB,OAAQ,CAAC,CAAC,CACnD,CACF,CAAC,CAED,mBACEhC,IAAA,QAAAiC,QAAA,CACGvB,IAAI,GAAK,EAAE,eACVV,IAAA,CAACL,IAAI,EACHe,IAAI,CAAEA,IAAK,CACXqB,YAAY,CAAEA,YAAa,CAC3Bf,SAAS,CAAEA,SAAU,CACrBd,EAAE,CAAEA,EAAG,CACR,CACF,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}